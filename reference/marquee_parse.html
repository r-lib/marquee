<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Parse a text as marquee — marquee_parse • marquee</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Parse a text as marquee — marquee_parse"><meta property="og:description" content="marquee uses an extension of CommonMark with no support for HTML code (it is
rendered verbatim). The focus is to allow easy formatting of text for
graphics, rather than fully fledged typesetting. See marquee syntax for
more about the format."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">marquee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/thomasp85/marquee/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parse a text as marquee</h1>
    <small class="dont-index">Source: <a href="https://github.com/thomasp85/marquee/blob/HEAD/R/parse.R" class="external-link"><code>R/parse.R</code></a></small>
    <div class="hidden name"><code>marquee_parse.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>marquee uses an extension of CommonMark with no support for HTML code (it is
rendered verbatim). The focus is to allow easy formatting of text for
graphics, rather than fully fledged typesetting. See <em>marquee syntax</em> for
more about the format.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">marquee_parse</span><span class="op">(</span><span class="va">text</span>, <span class="va">style</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>text</dt>
<dd><p>A character string. The core quality of markdown is that any text
is valid markdown so there is no restrictions on the content</p></dd>


<dt>style</dt>
<dd><p>A style set such as <code><a href="classic_style.html">classic_style()</a></code> that defines how the text
should be rendered</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame describing the various tokens of the text and the style
to apply to them. The output is mainly meant for programmatic consumption
such as in <code><a href="marquee_grob.html">marquee_grob()</a></code></p>


    </div>
    <div id="marquee-tags">
    <h2>marquee tags</h2>
    <p>marquee tokenizes the input text into blocks and spans. It recognises the
following tags:</p>
<p><strong>Block tags</strong></p>
<p><code>body</code> is the parent tag of a markdown document. It never contains any text
itself, only other blocks.</p>
<p><code>ul</code> is an unordered list. It contains a number of <code>li</code> children</p>
<p><code>ol</code> is an ordered list. It contains a number of <code>li</code> children</p>
<p><code>li</code> is a list element. If the list is tight it contains text directly inside
of it. If not, text are placed inside child <code>p</code> blocks</p>
<p><code>hr</code> is a horizontal line, spanning the width of the parent block. For
styling, the bottom border size is used when rendering</p>
<p><code>h1</code>-<code>h6</code> are headings at different levels</p>
<p><code>cb</code> is a code block. Text inside code blocks are rendered verbatim, i.e. it
cannot contain any children</p>
<p><code>p</code> is a standard paragraph block. Text separated by two line-ends are
separated into separate paragraphs</p>
<p><code>qb</code> is a quote block. It may contain children</p>
<p><strong>Span tags</strong></p>
<p><code>em</code> is an emphasized text span. Often this means italicizing the text, but
it is ultimately up to the renderer</p>
<p><code>str</code> is strong text, often rendered with bold text</p>
<p><code>a</code> is a link text. While marquee rendering doesn't allow for links, it can
still be rendered in a particular way</p>
<p><code>code</code> is text rendered as code. Often this uses a monospaced font. Text
inside this span is rendered verbatim</p>
<p><code>u</code> is text that should be underlined</p>
<p><code>del</code> is text that should have strikethrough</p>
    </div>
    <div id="marquee-syntax">
    <h2>marquee syntax</h2>
    <p>marquee uses md4c which is a fully CommonMark compliant markdown parser.
CommonMark is an effort to create an internally coherent markdown
specification, something that was missing from the original markdown
description. If you are used to writing markdown, you are used to CommonMark.
Below is a list of notable additions or details about the specific way
marquee handles CommonMark</p>
<p><strong>Underlines and strikethrough</strong></p>
<p>While not part of the basic CommonMark spec, underline and strikethrough are
supported by marquee using <code>_</code> and <code>~</code> (e.g. <code>_underline this_</code> and <code>~this was an error~</code>).</p>
<p><strong>Images</strong></p>
<p>Image tags (<code>![image title](path/to/image)</code>) are supported, but the title is
ignored. The path is returned as the token text.</p>
<p><strong>HTML</strong></p>
<p>HTML tags are ignored, i.e. they are rendered verbatim. This is not that
different from classic markdown rendering except that people often convert
markdown to HTML where these tags suddenly have meaning. They do not carry
any special significance when rendered with marquee</p>
    </div>
    <div id="styling">
    <h2>Styling</h2>
    <p>During parsing, each token is assigned a style based on the provided style
set. The styling is cascading, but without the intricacies of CSS. A child
element inherits the styling of it's parent for the elements that are set to
<code>NULL</code> in the style matching the child tag. Any style element that are
<code><a href="style_helpers.html">relative()</a></code> are computed based on the value of the parent style element.
<code><a href="style_helpers.html">em()</a></code> elements are resolved based on the size element of the child style,
and <code><a href="style_helpers.html">rem()</a></code> elements are resolved using the size element of the <code>body</code> style.</p>
<p><strong>Additional parsing information</strong></p>
<p>Apart from splitting the text up into tokens, <code>marquee_parse()</code> also provides
some additional information useful for rendering the output in the expected
way. The <code>id</code> column refers the tokens back to the original input text, the
<code>block</code> relates tokens together into blocks. Block elements increment the
block count when they are entered, and decrement it when they are excited.
The <code>type</code> column provides the type of the block. The <code>indentation</code> column
provides the node level in the tree. A child block will increase the
indentation for as long as it is active. <code>ol_index</code> provides the number
associated with the ordered list element. <code>tight</code> indicates whether the list
is tight (i.e. it was provided with no empty lines between list elements).
The <code>ends</code> column indicate until which row in the output the tag is active
(i.e. the tag is closed after the row indicated by the value in this column).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">marquee_parse</span><span class="op">(</span><span class="st">"# Header of the example\nSome body text"</span>, <span class="fu"><a href="classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 39</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   text          id block type  indentation ol_index tight  ends  size background</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">""</span>             1     1 body            1        0 FALSE     3    12 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">"</span>Header o…     1     2 h1              2        0 FALSE     2    27 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> <span style="color: #949494;">"</span>Some bod…     1     3 p               2        0 FALSE     3    12 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 29 more variables: family &lt;chr&gt;, weight &lt;int&gt;, italic &lt;lgl&gt;, width &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   features &lt;list&gt;, color &lt;chr&gt;, lineheight &lt;dbl&gt;, align &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   tracking &lt;dbl&gt;, indent &lt;dbl&gt;, hanging &lt;dbl&gt;, margin_top &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   margin_right &lt;dbl&gt;, margin_bottom &lt;dbl&gt;, margin_left &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   padding_top &lt;dbl&gt;, padding_right &lt;dbl&gt;, padding_bottom &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   padding_left &lt;dbl&gt;, border &lt;chr&gt;, border_size_top &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   border_size_right &lt;dbl&gt;, border_size_bottom &lt;dbl&gt;, …</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Thomas Lin Pedersen, Martin Mitáš.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

      </footer></div>

  


  

  </body></html>

