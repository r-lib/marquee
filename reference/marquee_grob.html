<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Construct a grob rendering one or more markdown texts — marquee_grob • marquee</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Construct a grob rendering one or more markdown texts — marquee_grob"><meta name="description" content="This is the main function of marquee. It takes a vector of markdown strings,
parses them with the provided style, and returns a grob capable of rendering
the parsed text into rich text and (possibly) images. See marquee_parse()
for more information about how markdown is parsed and see details below for
further information on how rendering proceeds."><meta property="og:description" content="This is the main function of marquee. It takes a vector of markdown strings,
parses them with the provided style, and returns a grob capable of rendering
the parsed text into rich text and (possibly) images. See marquee_parse()
for more information about how markdown is parsed and see details below for
further information on how rendering proceeds."><meta property="og:image" content="https://marquee.r-lib.org/logo.png"><script defer data-domain="marquee.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">marquee</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/marquee.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/marquee_style.html">Marquee Styling</a></li>
    <li><a class="dropdown-item" href="../articles/marquee_syntax.html">Marquee Syntax</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/05/marquee-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/marquee/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Construct a grob rendering one or more markdown texts</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/marquee/blob/main/R/grob.R" class="external-link"><code>R/grob.R</code></a></small>
      <div class="d-none name"><code>marquee_grob.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the main function of marquee. It takes a vector of markdown strings,
parses them with the provided style, and returns a grob capable of rendering
the parsed text into rich text and (possibly) images. See <code><a href="marquee_parse.html">marquee_parse()</a></code>
for more information about how markdown is parsed and see details below for
further information on how rendering proceeds.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">marquee_grob</span><span class="op">(</span></span>
<span>  <span class="va">text</span>,</span>
<span>  style <span class="op">=</span> <span class="fu"><a href="classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ignore_html <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  force_body_margin <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  default.units <span class="op">=</span> <span class="st">"npc"</span>,</span>
<span>  hjust <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>  vjust <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>  angle <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  vp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-text">text<a class="anchor" aria-label="anchor" href="#arg-text"></a></dt>
<dd><p>Either a character vector or a <code>marquee_parsed</code> object as created
by <code><a href="marquee_parse.html">marquee_parse()</a></code></p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>A style set such as <code><a href="classic_style.html">classic_style()</a></code> that defines how the text
should be rendered</p></dd>


<dt id="arg-ignore-html">ignore_html<a class="anchor" aria-label="anchor" href="#arg-ignore-html"></a></dt>
<dd><p>Should HTML code be removed from the output</p></dd>


<dt id="arg-force-body-margin">force_body_margin<a class="anchor" aria-label="anchor" href="#arg-force-body-margin"></a></dt>
<dd><p>Should the body margin override margin collapsing
calculations. See Details.</p></dd>


<dt id="arg-x-y">x, y<a class="anchor" aria-label="anchor" href="#arg-x-y"></a></dt>
<dd><p>The location of the markdown text in the graphics. If numeric it
will be converted to units using <code>default.units</code></p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>The width of each markdown text. If numeric it will be converted
to units using <code>default.units</code>. <code>NULL</code> is equivalent to the width of the
parent container. <code>NA</code> uses the width of the text as the full width of the
grob and will thus avoid any soft breaking of lines.</p></dd>


<dt id="arg-default-units">default.units<a class="anchor" aria-label="anchor" href="#arg-default-units"></a></dt>
<dd><p>A string giving the default units to apply to <code>x</code>, <code>y</code>,
and <code>width</code></p></dd>


<dt id="arg-hjust">hjust<a class="anchor" aria-label="anchor" href="#arg-hjust"></a></dt>
<dd><p>The horizontal justification of the markdown with respect to
<code>x</code>. Can either be a numeric or one of <code>"left"</code>, <code>"left-ink"</code>, <code>"center"</code>,
<code>"center-ink"</code>, <code>"right-ink"</code>, or <code>"right"</code></p></dd>


<dt id="arg-vjust">vjust<a class="anchor" aria-label="anchor" href="#arg-vjust"></a></dt>
<dd><p>The vertical justification of the markdown with respect to
<code>y</code>. Can either be a numeric or one of <code>"bottom"</code>, <code>"bottom-ink"</code>,
<code>"last-line"</code>, <code>"center"</code>, <code>"center-ink"</code>, <code>"first-line"</code>, <code>"top-ink"</code>,
<code>"top"</code></p></dd>


<dt id="arg-angle">angle<a class="anchor" aria-label="anchor" href="#arg-angle"></a></dt>
<dd><p>The angle of rotation (in degrees) around <code>x</code> and <code>y</code></p></dd>


<dt id="arg-vp">vp<a class="anchor" aria-label="anchor" href="#arg-vp"></a></dt>
<dd><p>An optional viewport to assign to the grob</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The name for the grob. If <code>NULL</code> a unique name will be generated</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A grob of class <code>marquee</code></p>
    </div>
    <div class="section level2">
    <h2 id="rendering">Rendering<a class="anchor" aria-label="anchor" href="#rendering"></a></h2>
    <p>marquee is first and foremost developed with the new 'glyph' rendering
features in 4.3.0 in mind. However, not all graphics devices supports this,
and while some might eventually do, it is quite concievable that some never
will. Because of this, marquee has a fallback where it will render text as a
mix of polygons and rasters (depending on the font in use) if the device
doesn't report 'glyphs' capabilities. The upside is that it works (almost)
everywhere, but the downside is that the fallback is much slower and with
poorer visual quality. Because of this it is advisable to use a modern
graphics device with glyphs support if at all possible.</p>
    </div>
    <div class="section level2">
    <h2 id="rendering-style">Rendering style<a class="anchor" aria-label="anchor" href="#rendering-style"></a></h2>
    <p>The rendering more or less adheres to the styling provided by
<code><a href="marquee_parse.html">marquee_parse()</a></code>, but has some intricacies as detailed below:</p>
<p><strong>Tight lists</strong></p>
<p>If a list is tight, the bottom margin of each <code>li</code> tag will be set so the
spacing matches the lineheight. Further, the top margin will be set to 0.</p>
<p><strong>Block images</strong></p>
<p>In markdown, image tags are span elements so they can be placed inline.
However, if an image tag is the only thing that is contained inside a p tag
marquee determines that it should be considered a block element. In that
case, the parent p element inherits the styling from the image element so
that the image can e.g. adhere to <code>align</code> properties, or provide their own
padding.</p>
<p><strong>Horizontal rulers</strong></p>
<p>These elements are rendered as an empty block. The standard style sets a
bottom border size and no size for the other sides.</p>
<p><strong>Margin collapsing</strong></p>
<p>Margin calculations follows the margin collapsing rules of HTML. Read more
about these at <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_box_model/Mastering_margin_collapsing" class="external-link">mdn</a>.
Margin collapsing means that elements with margin set to 0 might end up with
a margin. Specifically for the body element this can be a problem if you want
to enforce a tight box around your text. Because of this the
<code>force_body_margin</code> argument allows you to overwrite the margins
for the body element with the original values after collapsing has been
performed.</p>
<p><strong>Underline and strikethrough</strong></p>
<p>Underlines are placed 0.1em below the baseline of the text. Strikethrough are
placed 0.3em above the baseline. The width of the line is set to 0.075em. It
inherits the color of the text. No further styling is possible.</p>
<p><strong>Spans with background</strong></p>
<p>Consecutive spans with the same background and border settings are merged
into a single rectangle. The padding of the span defines the size of the
background.</p>
<p><strong>Bullet position</strong></p>
<p>Bullets are placed, right-aligned, 0.25em to the left of the first line in
the li element if the text direction is ltr. For rtl text it is placed,
left-aligned, 0.25 em to the right of the first line.</p>
<p><strong>Border with border radius</strong></p>
<p>If borders are not the same on all sides they are drawn one by one. In this
case the border radius is ignored.</p>
    </div>
    <div class="section level2">
    <h2 id="image-rendering">Image rendering<a class="anchor" aria-label="anchor" href="#image-rendering"></a></h2>
    <p>The image tag can be used to place images. There are support for both png,
jpeg, and svg images. If the path instead names a grob, ggplot, or patchwork
object then this is rendered instead. If the file cannot be read, if it d
oesn't exist, or if the path names an object that is not a grob, ggplot or
patchwork, a placeholder is rendered in it's place (black square with red
cross).</p>
<p><strong>Image sizing</strong></p>
<p>There is no standard in markdown for specifying the size of images. By
default, block-level images fill the width of it's container and maintain
it's aspect ratio. Inline images have a default width of 0.65em and a height
matching the aspect ration.</p>
<p>However, if you wish to control sizing, you can instead provide the image as
a grob with a viewport with fixed dimensions, in which case this will be used
as long as the width doesn't exceed the width of the container (in which case
it will get downsized). If a rastergrob is provided without absolute sizing,
the aspect ratio will match the raster, otherwise the aspect ratio will be
taken from the styling of the element (defaults to 1.65)</p>
    </div>
    <div class="section level2">
    <h2 id="table-rendering">Table rendering<a class="anchor" aria-label="anchor" href="#table-rendering"></a></h2>
    <p>While marquee does not support the extended table syntax for markdown it does
allow you to include tables in the output. It does so by supporting gt
objects as valid paths in image tags in the same way as ggplots etc. This
meeans that you can style your tables any way you wish and with the full
power of gt, which is much more flexible than the markdown table syntax.</p>
    </div>
    <div class="section level2">
    <h2 id="textbox-justification">Textbox justification<a class="anchor" aria-label="anchor" href="#textbox-justification"></a></h2>
    <p>The justification options exceeds the classic ones provided by grid. While
numeric values are available as always, the number of possible text values
are larger. Horizontal justification add <code>"left-ink"</code>, <code>"center-ink"</code>, and
<code>"right-ink"</code> which uses the left-most and right-most positioned glyph (or
halfway between them) as anchors. Vertical justification has the equivalent
<code>"bottom-ink"</code>, <code>"center-ink"</code>, and <code>"top-ink"</code> anchors, but also
<code>"first-line"</code> and <code>"last-line"</code> which sets the anchor at the baseline of the
first or last line respectively.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Martin Mitáš, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

