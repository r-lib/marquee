<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Marquee-aware string interpolation — marquee_glue • marquee</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Marquee-aware string interpolation — marquee_glue"><meta name="description" content="If you want to create your markdown programmatically you'd probably want to
use some sort of string interpolation such as glue(). However, the custom
span syntax of marquee interferes with the standard interpolation syntax of
glue. This function let's you use both together."><meta property="og:description" content="If you want to create your markdown programmatically you'd probably want to
use some sort of string interpolation such as glue(). However, the custom
span syntax of marquee interferes with the standard interpolation syntax of
glue. This function let's you use both together."><meta property="og:image" content="https://marquee.r-lib.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="marquee.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">marquee</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/marquee.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/marquee_style.html">Marquee Styling</a></li>
    <li><a class="dropdown-item" href="../articles/marquee_syntax.html">Marquee Syntax</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/05/marquee-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/marquee/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Marquee-aware string interpolation</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/marquee/blob/main/R/glue.R" class="external-link"><code>R/glue.R</code></a></small>
      <div class="d-none name"><code>marquee_glue.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If you want to create your markdown programmatically you'd probably want to
use some sort of string interpolation such as <code>glue()</code>. However, the custom
span syntax of marquee interferes with the standard interpolation syntax of
glue. This function let's you use both together.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">marquee_glue</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  .sep <span class="op">=</span> <span class="st">""</span>,</span>
<span>  .envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .open <span class="op">=</span> <span class="st">"{"</span>,</span>
<span>  .close <span class="op">=</span> <span class="st">"}"</span>,</span>
<span>  .na <span class="op">=</span> <span class="st">"NA"</span>,</span>
<span>  .null <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .literal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .transformer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .trim <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">marquee_glue_data</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .sep <span class="op">=</span> <span class="st">""</span>,</span>
<span>  .envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .open <span class="op">=</span> <span class="st">"{"</span>,</span>
<span>  .close <span class="op">=</span> <span class="st">"}"</span>,</span>
<span>  .na <span class="op">=</span> <span class="st">"NA"</span>,</span>
<span>  .null <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .literal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .transformer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .trim <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>[<code>expressions</code>]<br> Unnamed arguments are taken to be expression
string(s) to format. Multiple inputs are concatenated together before formatting.
Named arguments are taken to be temporary variables available for substitution.</p>
<p>For <code>glue_data()</code>, elements in <code>...</code> override the values in <code>.x</code>.</p></dd>


<dt id="arg--sep">.sep<a class="anchor" aria-label="anchor" href="#arg--sep"></a></dt>
<dd><p>[<code>character(1)</code>: ‘""’]<br> Separator used to separate elements.</p></dd>


<dt id="arg--envir">.envir<a class="anchor" aria-label="anchor" href="#arg--envir"></a></dt>
<dd><p>[<code>environment</code>: <code><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame()</a></code>]<br> Environment to evaluate each expression in. Expressions are
evaluated from left to right. If <code>.x</code> is an environment, the expressions are
evaluated in that environment and <code>.envir</code> is ignored. If <code>NULL</code> is passed, it is equivalent to <code><a href="https://rdrr.io/r/base/environment.html" class="external-link">emptyenv()</a></code>.</p></dd>


<dt id="arg--open">.open<a class="anchor" aria-label="anchor" href="#arg--open"></a></dt>
<dd><p>[<code>character(1)</code>: ‘\{’]<br> The opening delimiter. Doubling the
full delimiter escapes it.</p></dd>


<dt id="arg--close">.close<a class="anchor" aria-label="anchor" href="#arg--close"></a></dt>
<dd><p>[<code>character(1)</code>: ‘\}’]<br> The closing delimiter. Doubling the
full delimiter escapes it.</p></dd>


<dt id="arg--na">.na<a class="anchor" aria-label="anchor" href="#arg--na"></a></dt>
<dd><p>[<code>character(1)</code>: ‘NA’]<br> Value to replace <code>NA</code> values
with. If <code>NULL</code> missing values are propagated, that is an <code>NA</code> result will
cause <code>NA</code> output. Otherwise the value is replaced by the value of <code>.na</code>.</p></dd>


<dt id="arg--null">.null<a class="anchor" aria-label="anchor" href="#arg--null"></a></dt>
<dd><p>[<code>character(1)</code>: ‘character()’]<br> Value to replace
NULL values with. If <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> whole output is <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>. If
<code>NULL</code> all NULL values are dropped (as in <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code>). Otherwise the
value is replaced by the value of <code>.null</code>.</p></dd>


<dt id="arg--comment">.comment<a class="anchor" aria-label="anchor" href="#arg--comment"></a></dt>
<dd><p>[<code>character(1)</code>: ‘#’]<br> Value to use as the comment
character.</p></dd>


<dt id="arg--literal">.literal<a class="anchor" aria-label="anchor" href="#arg--literal"></a></dt>
<dd><p>[<code>boolean(1)</code>: ‘FALSE’]<br> Whether to treat single or
double quotes, backticks, and comments as regular characters (vs. as
syntactic elements), when parsing the expression string. Setting <code>.literal = TRUE</code> probably only makes sense in combination with a custom
<code>.transformer</code>, as is the case with <code>glue_col()</code>. Regard this argument
(especially, its name) as experimental.</p></dd>


<dt id="arg--transformer">.transformer<a class="anchor" aria-label="anchor" href="#arg--transformer"></a></dt>
<dd><p>[<code>function</code>]<br> A function taking two arguments, <code>text</code>
and <code>envir</code>, where <code>text</code> is the unparsed string inside the glue block and
<code>envir</code> is the execution environment. A <code>.transformer</code> lets you modify a
glue block before, during, or after evaluation, allowing you to create your
own custom <code>glue()</code>-like functions. See <code>vignette("transformers")</code> for
examples.</p></dd>


<dt id="arg--trim">.trim<a class="anchor" aria-label="anchor" href="#arg--trim"></a></dt>
<dd><p>[<code>logical(1)</code>: ‘TRUE’]<br> Whether to trim the input
template with <code><a href="https://glue.tidyverse.org/reference/trim.html" class="external-link">trim()</a></code> or not.</p></dd>


<dt id="arg--x">.x<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p>[<code>listish</code>]<br> An environment, list, or data frame used to lookup values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If you choose a different set of delimiters than <code>"{"</code> and <code>"}"</code> for the
interpolation the functions will call the equivalent glue functions directly.
However, if you keep the defaults, the functions will use a custom
transformer that will make sure to keep the marquee custom span notation. You
can both interpolate the content of the span, as well as the span class (see
examples)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># standard use</span></span></span>
<span class="r-in"><span><span class="va">red_text</span> <span class="op">&lt;-</span> <span class="st">"this text will be red"</span></span></span>
<span class="r-in"><span><span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {.red {red_text}}!"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This will be black and {.red this text will be red}!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if the span is not valid it will be treated as standard glue interpolation</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {.red}!"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Failed to evaluate glue component {.red}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error:</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> object '.red' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can interpolate the tag name as well</span></span></span>
<span class="r-in"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="st">"green"</span></span></span>
<span class="r-in"><span><span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {.{col} this text will be {col}}!"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This will be black and {.green this text will be green}!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Tag name interpolation must follow a `.` or a `#` as these identify the</span></span></span>
<span class="r-in"><span><span class="co"># bracket pair as a custom span class</span></span></span>
<span class="r-in"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="st">".yellow"</span></span></span>
<span class="r-in"><span><span class="co"># This is not what you want probably</span></span></span>
<span class="r-in"><span><span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {{col} this text will be {col}}!"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This will be black and {col} this text will be .yellow}!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Tag interpolation should also interpolate the full tag and be followed by</span></span></span>
<span class="r-in"><span><span class="co"># a space in order to be valid</span></span></span>
<span class="r-in"><span><span class="va">part</span> <span class="op">&lt;-</span> <span class="st">"l"</span></span></span>
<span class="r-in"><span><span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {.ye{part}low this text will be {col}}!"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This will be black and {.ye{part}low this text will be .yellow}!</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">marquee_glue</span><span class="op">(</span><span class="st">"This will be black and {.{part}avender this text will be {col}}!"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in .transformer(expr, env) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Malformed marquee interpolation block. When interpolating a tag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name it must be followed by a space</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Martin Mitáš, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

