<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>marquee • marquee</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="marquee">
<meta name="robots" content="noindex">
<script defer data-domain="marquee.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">marquee</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/marquee.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/marquee_style.html">Marquee Styling</a></li>
    <li><a class="dropdown-item" href="../articles/marquee_syntax.html">Marquee Syntax</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/05/marquee-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/marquee/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>marquee</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/marquee/blob/main/vignettes/marquee.Rmd" class="external-link"><code>vignettes/marquee.Rmd</code></a></small>
      <div class="d-none name"><code>marquee.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://marquee.r-lib.org">marquee</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>This document will get you up to speed on using marquee for rich text
formatting in R graphics. Marquee is collectively a markdown dialect, a
parser for the dialect and a grid renderer for text written in the
dialect. The package aims to fill the same use cases as <a href="https://wilkelab.org/gridtext/" class="external-link">gridtext</a> and <a href="https://wilkelab.org/ggtext/" class="external-link">ggtext</a> by Claus Wilke, but works
in a very different and more low-level way.</p>
<div class="section level2">
<h2 id="requirements">Requirements<a class="anchor" aria-label="anchor" href="#requirements"></a>
</h2>
<p>Before we start we should note that marquee has been build for the
future. What I mean by this is that it is based on a slew of new
features in the R graphics engine putting very hard requirements on what
R version it can be used with <em>and</em> which graphics devices it
works with. If, for some reason, your setup cannot accommodate these
needs you can perhaps get some of the way using <a href="https://wilkelab.org/gridtext/" class="external-link">gridtext</a>/<a href="https://wilkelab.org/ggtext/" class="external-link">ggtext</a>. The nuisance of this
will likely diminish or completely disappear with time.</p>
</div>
<div class="section level2">
<h2 id="an-example">An example<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md_text</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum</span></span>
<span><span class="st">Lorem ipsum dolor sit amet, *consectetur* adipiscing elit, sed do eiusmod tempor incididunt ut</span></span>
<span><span class="st">labore et dolore magna **aliqua**. Ut enim ad minim veniam, quis nostrud exercitation ullamco</span></span>
<span><span class="st">laboris nisi ut aliquip ex ea commodo _consequat_. Duis aute irure dolor in reprehenderit in</span></span>
<span><span class="st">voluptate velit esse cillum dolore eu fugiat nulla ~pariatur~. Excepteur sint occaecat</span></span>
<span><span class="st">cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</span></span>
<span></span>
<span><span class="va">grob</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">grob</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-2-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>From this small example you can see that markdown behaves as you’d
expect. We have emphasis, strong, underline, and strikethrough, and
stuff like headings etc. In fact, the full markdown (CommonMark) spec is
supported and will behave as you’d expect.</p>
<p>Besides the standard grob arguments you’d expect,
<code><a href="../reference/marquee_grob.html">marquee_grob()</a></code> takes two main arguments as you can see
above. The text, which can be a character vector with multiple separate
markdown strings, and a style specification, which again can be a vector
of styles or a single style to format everything alike. Marquee ships
with <code><a href="../reference/classic_style.html">classic_style()</a></code> which is designed to mimic the look of
standard HTML rendered markdown. The function itself allows you to
modify the final style, and you could also modify it after construction
to create a completely new style:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_style</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span>body_font <span class="op">=</span> <span class="st">"serif"</span>, header_font <span class="op">=</span> <span class="st">"mono"</span>, hanging <span class="op">=</span> <span class="fu"><a href="../reference/style_helpers.html">em</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_style</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/style_set.html">modify_style</a></span><span class="op">(</span></span>
<span>  <span class="va">new_style</span>,</span>
<span>  <span class="st">"str"</span>,</span>
<span>  background <span class="op">=</span> <span class="st">"lightgrey"</span>,</span>
<span>  border_radius <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  padding <span class="op">=</span> <span class="fu"><a href="../reference/style_helpers.html">trbl</a></span><span class="op">(</span><span class="fu"><a href="../reference/style_helpers.html">em</a></span><span class="op">(</span><span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text</span>, <span class="va">new_style</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-3-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>Besides standard markdown, marquee also allows you to create custom
span classes. These span classes can be styled to anything, but marquee
contains a nifty feature where, if the class matches a recognized color
name or hex-code, it will be automatically coloured.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md_text_custom</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum</span></span>
<span><span class="st">Lorem ipsum dolor {.red sit amet, *consectetur* adipiscing elit, sed do} eiusmod tempor</span></span>
<span><span class="st">incididunt ut labore et dolore magna **aliqua**. Ut enim ad minim {#2af veniam}, quis nostrud</span></span>
<span><span class="st">exercitation ul lamcolaboris nisi ut aliquip ex ea commodo _consequat_. Duis aute irure dolor</span></span>
<span><span class="st">in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla ~pariatur~. Excepteur</span></span>
<span><span class="st">sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est</span></span>
<span><span class="st">laborum."</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_custom</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-4-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>If you provide a styling for the custom class it takes precedence
over any matching color name</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_custom</span>, <span class="fu"><a href="../reference/style_set.html">modify_style</a></span><span class="op">(</span><span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"red"</span>, tracking <span class="op">=</span> <span class="fl">400</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-5-1.png" width="98%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="use-in-ggplot2">Use in ggplot2<a class="anchor" aria-label="anchor" href="#use-in-ggplot2"></a>
</h2>
<p>Recognizing that most people doesn’t make visualizations directly
with grid, marquee also contains the infrastructure to use markdown
inside ggplot2 plots. It is expected that these functions will
eventually move to ggplot2 proper, but while the package is stress
tested they will stay here.</p>
<div class="section level3">
<h3 id="the-marquee-geom">The marquee geom<a class="anchor" aria-label="anchor" href="#the-marquee-geom"></a>
</h3>
<p>One way to use marquee with ggplot2 is with
<code><a href="../reference/geom_marquee.html">geom_marquee()</a></code>. It supersedes both <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code>
and <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code> in its capabilities, and even if you don’t
need to plot rich text, the styling of <code><a href="../reference/geom_marquee.html">geom_marquee()</a></code> is
much more capable:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fancy_font</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span></span>
<span>  weight <span class="op">=</span> <span class="st">"semibold"</span>,</span>
<span>  features <span class="op">=</span> <span class="fu">systemfonts</span><span class="fu">::</span><span class="fu"><a href="https://systemfonts.r-lib.org/reference/font_feature.html" class="external-link">font_feature</a></span><span class="op">(</span></span>
<span>    ligatures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"standard"</span>, <span class="st">"discretionary"</span><span class="op">)</span>,</span>
<span>    letters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"stylistic"</span>, <span class="st">"swash"</span>, <span class="st">"historical"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_marquee.html">geom_marquee</a></span><span class="op">(</span>style <span class="op">=</span> <span class="va">fancy_font</span>, size <span class="op">=</span> <span class="fl">2.5</span>, family <span class="op">=</span> <span class="st">"spectral"</span><span class="op">)</span> <span class="co"># You may not have this font</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-6-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>However, the main use will probably be to mix in italicized, bold, or
colored fonts in labels, which marquee makes very easy</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"(\\w+)"</span>, <span class="st">"{.red ***\\1***}"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cars</span></span>
<span><span class="co">#&gt;  [1] "{.red ***Mazda***} RX4"          </span></span>
<span><span class="co">#&gt;  [2] "{.red ***Mazda***} RX4 Wag"      </span></span>
<span><span class="co">#&gt;  [3] "{.red ***Datsun***} 710"         </span></span>
<span><span class="co">#&gt;  [4] "{.red ***Hornet***} 4 Drive"     </span></span>
<span><span class="co">#&gt;  [5] "{.red ***Hornet***} Sportabout"  </span></span>
<span><span class="co">#&gt;  [6] "{.red ***Valiant***}"            </span></span>
<span><span class="co">#&gt;  [7] "{.red ***Duster***} 360"         </span></span>
<span><span class="co">#&gt;  [8] "{.red ***Merc***} 240D"          </span></span>
<span><span class="co">#&gt;  [9] "{.red ***Merc***} 230"           </span></span>
<span><span class="co">#&gt; [10] "{.red ***Merc***} 280"           </span></span>
<span><span class="co">#&gt; [11] "{.red ***Merc***} 280C"          </span></span>
<span><span class="co">#&gt; [12] "{.red ***Merc***} 450SE"         </span></span>
<span><span class="co">#&gt; [13] "{.red ***Merc***} 450SL"         </span></span>
<span><span class="co">#&gt; [14] "{.red ***Merc***} 450SLC"        </span></span>
<span><span class="co">#&gt; [15] "{.red ***Cadillac***} Fleetwood" </span></span>
<span><span class="co">#&gt; [16] "{.red ***Lincoln***} Continental"</span></span>
<span><span class="co">#&gt; [17] "{.red ***Chrysler***} Imperial"  </span></span>
<span><span class="co">#&gt; [18] "{.red ***Fiat***} 128"           </span></span>
<span><span class="co">#&gt; [19] "{.red ***Honda***} Civic"        </span></span>
<span><span class="co">#&gt; [20] "{.red ***Toyota***} Corolla"     </span></span>
<span><span class="co">#&gt; [21] "{.red ***Toyota***} Corona"      </span></span>
<span><span class="co">#&gt; [22] "{.red ***Dodge***} Challenger"   </span></span>
<span><span class="co">#&gt; [23] "{.red ***AMC***} Javelin"        </span></span>
<span><span class="co">#&gt; [24] "{.red ***Camaro***} Z28"         </span></span>
<span><span class="co">#&gt; [25] "{.red ***Pontiac***} Firebird"   </span></span>
<span><span class="co">#&gt; [26] "{.red ***Fiat***} X1-9"          </span></span>
<span><span class="co">#&gt; [27] "{.red ***Porsche***} 914-2"      </span></span>
<span><span class="co">#&gt; [28] "{.red ***Lotus***} Europa"       </span></span>
<span><span class="co">#&gt; [29] "{.red ***Ford***} Pantera L"     </span></span>
<span><span class="co">#&gt; [30] "{.red ***Ferrari***} Dino"       </span></span>
<span><span class="co">#&gt; [31] "{.red ***Maserati***} Bora"      </span></span>
<span><span class="co">#&gt; [32] "{.red ***Volvo***} 142E"</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">cars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_marquee.html">geom_marquee</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-7-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>Another use of the geom, where rich text may come more into play, is
in annotations. Let’s make a textbox style and add some lorem ipsum to
our plot</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text_box_style</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/style_set.html">modify_style</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  <span class="st">"body"</span>,</span>
<span>  padding <span class="op">=</span> <span class="fu"><a href="../reference/style_helpers.html">skip_inherit</a></span><span class="op">(</span><span class="fu"><a href="../reference/style_helpers.html">trbl</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  border_radius <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">cars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_marquee.html">geom_marquee</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="va">GeomMarquee</span>,</span>
<span>    label <span class="op">=</span> <span class="va">md_text</span>,</span>
<span>    x <span class="op">=</span> <span class="fl">450</span>,</span>
<span>    y <span class="op">=</span> <span class="fl">35</span>,</span>
<span>    style <span class="op">=</span> <span class="va">text_box_style</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"lightgrey"</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>    hjust <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>    vjust <span class="op">=</span> <span class="st">"top"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-8-1.png" width="98%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="the-marquee-element">The marquee element<a class="anchor" aria-label="anchor" href="#the-marquee-element"></a>
</h3>
<p>Rich text in plotted text is probably limited in use, but when you
need it you really need it. Different from this is formatting of the
text that surrounds the plot. Here you tend to treat the text as rich
text and would want full control of the styling. Enter
<code><a href="../reference/element_marquee.html">element_marquee()</a></code>, a drop-in substitute for
<code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text()</a></code> which will format and style any non-plotting
text.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">cars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_marquee.html">geom_marquee</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="va">md_text</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="../reference/element_marquee.html">element_marquee</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-9-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>As can be seen, the defaults will let the text run for as long as it
needs without doing any text wrapping. This is because it makes
alignment behave in the same way as <code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text()</a></code>.
However, if you have a lot of text like we do above, you certainly want
to turn on that feature. You do that by setting a width. <code>1</code>
is equivalent to the width of the area the element occupies so that is a
natural value here, but you can set it to any <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">grid::unit()</a></code>
value you wish.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">cars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_marquee.html">geom_marquee</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="va">md_text</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="../reference/element_marquee.html">element_marquee</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-10-1.png" width="98%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="a-bit-about-images">A bit about images<a class="anchor" aria-label="anchor" href="#a-bit-about-images"></a>
</h2>
<p>Markdown famously supports images through the <code>![]()</code>
syntax. So does marquee of course (which means you can put images
everywhere in ggplot2 if you wish). Currently, there is support for PNG,
JPEG, and SVG, with the latter being responsive to resizing etc. The
images can reside online or on your computer — it all should “just
work”. If an image is placed inline it is sized to fit the height of
that line and adjusting the width to keep the correct aspect ratio. If
an image is placed by itself, it expands to fill the provided width,
width the height being calculated to match the aspect ratio of the
image.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md_text_fig</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum ![](https://cran.r-project.org/Rlogo.svg)</span></span>
<span><span class="st">Lorem ipsum dolor {.red sit amet, *consectetur* adipiscing elit, sed do} eiusmod tempor</span></span>
<span><span class="st">incididunt ut labore et dolore magna **aliqua**. Ut enim ad minim {#2af veniam}, quis nostrud</span></span>
<span><span class="st">exercitation ul lamcolaboris nisi ut aliquip ex ea commodo _consequat_. Duis aute irure dolor</span></span>
<span><span class="st">in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla ~pariatur~. Excepteur</span></span>
<span><span class="st">sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est</span></span>
<span><span class="st">laborum."</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_fig</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-11-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>Compare that to</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md_text_fig2</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum</span></span>
<span><span class="st"></span></span>
<span><span class="st">![](https://cran.r-project.org/Rlogo.svg)</span></span>
<span><span class="st"></span></span>
<span><span class="st">Lorem ipsum dolor {.red sit amet, *consectetur* adipiscing elit, sed do} eiusmod tempor</span></span>
<span><span class="st">incididunt ut labore et dolore magna **aliqua**. Ut enim ad minim {#2af veniam}, quis nostrud</span></span>
<span><span class="st">exercitation ul lamcolaboris nisi ut aliquip ex ea commodo _consequat_. Duis aute irure dolor</span></span>
<span><span class="st">in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla ~pariatur~. Excepteur</span></span>
<span><span class="st">sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est</span></span>
<span><span class="st">laborum."</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_fig2</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-12-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>However, marquee has a pretty unique trick up it’s sleeve compared to
other markdown formats. It doesn’t just accept paths to images — it also
accepts R graphic objects (currently grid grobs, ggplot2 plots and
patchwork plots). It all works as you’d expect:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gear</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">md_text_plot</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum</span></span>
<span><span class="st"></span></span>
<span><span class="st">![](p)</span></span>
<span><span class="st"></span></span>
<span><span class="st">Lorem ipsum dolor {.red sit amet, *consectetur* adipiscing elit, sed do} eiusmod tempor</span></span>
<span><span class="st">incididunt ut labore et dolore magna **aliqua**. Ut enim ad minim {#2af veniam}, quis nostrud</span></span>
<span><span class="st">exercitation ul lamcolaboris nisi ut aliquip ex ea commodo _consequat_. Duis aute irure dolor</span></span>
<span><span class="st">in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla ~pariatur~. Excepteur</span></span>
<span><span class="st">sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est</span></span>
<span><span class="st">laborum."</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_plot</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with</span></span>
<span><span class="co">#&gt; `binwidth`.</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-13-1.png" width="98%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="a-bit-about-tables">A bit about tables<a class="anchor" aria-label="anchor" href="#a-bit-about-tables"></a>
</h2>
<p>The table markdown syntax is not supported in marquee. However, you
can still include tables in marquee, and with much more styling support
than standard markdown table syntax provide. This magic is an extension
of what was talked about above. More to the point, gt table objects are
recognized as valid objects in the image tag path and can thus be
included directly in the output. We show the power here with a table
specification taken from the <a href="https://gt.rstudio.com/articles/gt.html" class="external-link">gt introduction</a>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="va">airquality_m</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span><span class="va">airquality_m</span><span class="op">$</span><span class="va">Year</span> <span class="op">&lt;-</span> <span class="fl">1973L</span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="va">airquality_m</span><span class="op">)</span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span><span class="va">table</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"New York Air Quality Measurements"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Daily measurements in New York City (May 1-10, 1973)"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html" class="external-link">tab_spanner</a></span><span class="op">(</span><span class="va">table</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Month</span>, <span class="va">Day</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html" class="external-link">tab_spanner</a></span><span class="op">(</span><span class="va">table</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"Measurement"</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Ozone</span>, <span class="va">Solar.R</span>, <span class="va">Wind</span>, <span class="va">Temp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md_text_table</span> <span class="op">&lt;-</span></span>
<span><span class="st">"# Lorem Ipsum</span></span>
<span><span class="st">Below we have a table created with gt</span></span>
<span><span class="st"></span></span>
<span><span class="st">![](table)</span></span>
<span><span class="st"></span></span>
<span><span class="st">*Such tables, much cells*"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="fu"><a href="../reference/marquee_grob.html">marquee_grob</a></span><span class="op">(</span><span class="va">md_text_table</span>, <span class="fu"><a href="../reference/classic_style.html">classic_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="marquee_files/figure-html/unnamed-chunk-16-1.png" width="98%" style="display: block; margin: auto;"></p>
<p>The support is still somewhat experimental as gt-to-grob conversion
is getting build out. Some gt features rely on HTML formatting still and
will end up looking weird, but standard table inclusion works as
expected.</p>
</div>
<div class="section level2">
<h2 id="wrapping-up">Wrapping up<a class="anchor" aria-label="anchor" href="#wrapping-up"></a>
</h2>
<p>This should give you enough of an overview to get started. The
Marquee Style and Marquee Syntax vignettes provides a bit more detail on
their respective areas if you need to dive deeper.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Martin Mitáš, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
